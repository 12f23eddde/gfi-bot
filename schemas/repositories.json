{
    "bsonType": "object",
    "description": "Repository statistics for RecGFI training",
    "required": [
        "created_at",
        "updated_at",
        "owner",
        "name",
        "language",
        "repo_created_at",
        "stars",
        "contributors",
        "commits",
        "historical_issues"
    ],
    "additionalProperties": false,
    "properties": {
        "created_at": {
            "bsonType": "date",
            "description": "The time when this document is added to this collection"
        },
        "updated_at": {
            "bsonType": "date",
            "description": "The last time when this document is updated (to reflect latest statistics)"
        },
        "owner": {
            "bsonType": "string",
            "description": "Repository owner name"
        },
        "name": {
            "bsonType": "string",
            "description": "Repository name"
        },
        "language": {
            "bsonType": "string",
            "description": "Main programming language (as returned by GitHub)"
        },
        "repo_created_at": {
            "bsonType": "date",
            "description": "The time when this repository is created in GitHub"
        },
        "stars": {
            "bsonType": "array",
            "description": "A time series describing star changes since repository creation",
            "items": {
                "bsonType": "object",
                "required": [
                    "month",
                    "count"
                ],
                "additionalProperties": false,
                "properties": {
                    "month": {
                        "bsonType": "date",
                        "description": "The month"
                    },
                    "count": {
                        "bsonType": "int",
                        "minimum": 0,
                        "description": "Number of stars received in this month, can be an approximate value"
                    }
                }
            }
        },
        "contributors": {
            "bsonType": "array",
            "description": "A time series describing contributor changes since repository creation",
            "items": {
                "bsonType": "object",
                "required": [
                    "month",
                    "count"
                ],
                "additionalProperties": false,
                "properties": {
                    "month": {
                        "bsonType": "date",
                        "description": "The month"
                    },
                    "count": {
                        "bsonType": "int",
                        "minimum": 0,
                        "description": "Number of new contributors in this month, can be an approximate value"
                    }
                }
            }
        },
        "commits": {
            "bsonType": "array",
            "description": "A time series describing commits since repository creation",
            "items": {
                "bsonType": "object",
                "required": [
                    "month",
                    "count"
                ],
                "additionalProperties": false,
                "properties": {
                    "month": {
                        "bsonType": "date",
                        "description": "The month"
                    },
                    "count": {
                        "bsonType": "int",
                        "minimum": 0,
                        "description": "Number of new commits in this month, can be an approximate value"
                    }
                }
            }
        },
        "historical_issues": {
            "bsonType": "array",
            "description": "Statistics for all issues and PRs in this repository",
            "items": {
                "bsonType": "object",
                "required": [
                    "number",
                    "reporter",
                    "created_at",
                    "closed_at",
                    "is_pull",
                    "closer_commit_num"
                ],
                "additionalProperties": false,
                "properties": {
                    "number": {
                        "bsonType": "int",
                        "minimum": 0,
                        "description": "The issue number in GitHub"
                    },
                    "reporter": {
                        "bsonType": "string",
                        "description": "The GitHub username of the reporter"
                    },
                    "created_at": {
                        "bsonType": "date",
                        "description": "The time when this issue is created"
                    },
                    "closed_at": {
                        "bsonType": "date",
                        "description": "The time when this issue is closed"
                    },
                    "is_pull": {
                        "bsonType": "bool",
                        "description": "Whether the issue is a pull request"
                    },
                    "closer_commit_num": {
                        "bsonType": ["int", "null"],
                        "minimum": 0,
                        "description": "If the issue is closed by a commit/PR, number of commits made by the committer/PR author before closing, excluding the commit itself/commits in the PR. Can be null if the issue is not closed by a commit/PR"
                    }
                }
            }
        }
    }
}
